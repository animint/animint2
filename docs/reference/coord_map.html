<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Map projections. — coord_map • animint2</title><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto_Condensed-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Mono-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Map projections. — coord_map"><meta name="description" content="The representation of a portion of the earth, which is approximately spherical,
onto a flat 2D plane requires a projection. This is what
coord_map does. These projections account for the fact that the
actual length (in km) of one degree of longitude varies between the equator
and the pole. Near the equator, the ratio between the lengths of one degree
of latitude and one degree of longitude is approximately 1. Near the pole, it
is tends towards infinity because the length of one degree of longitude tends
towards 0. For regions that span only a few degrees and are not too close to
the poles, setting the aspect ratio of the plot to the appropriate lat/lon
ratio approximates the usual mercator projection. This is what
coord_quickmap does. With coord_map all elements of the
graphic have to be projected which is not the case here. So
coord_quickmap has the advantage of being much faster, in
particular for complex plots such as those using with
geom_tile, at the expense of correctness in the projection.
This coordinate system provides the full range of map projections available
in the mapproj package."><meta property="og:description" content="The representation of a portion of the earth, which is approximately spherical,
onto a flat 2D plane requires a projection. This is what
coord_map does. These projections account for the fact that the
actual length (in km) of one degree of longitude varies between the equator
and the pole. Near the equator, the ratio between the lengths of one degree
of latitude and one degree of longitude is approximately 1. Near the pole, it
is tends towards infinity because the length of one degree of longitude tends
towards 0. For regions that span only a few degrees and are not too close to
the poles, setting the aspect ratio of the plot to the appropriate lat/lon
ratio approximates the usual mercator projection. This is what
coord_quickmap does. With coord_map all elements of the
graphic have to be projected which is not the case here. So
coord_quickmap has the advantage of being much faster, in
particular for complex plots such as those using with
geom_tile, at the expense of correctness in the projection.
This coordinate system provides the full range of map projections available
in the mapproj package."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">animint2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2024.10.11</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/animint2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/animint/animint2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Map projections.</h1>
      <small class="dont-index">Source: <a href="https://github.com/animint/animint2/blob/HEAD/R/coord-map.r" class="external-link"><code>R/coord-map.r</code></a>, <a href="https://github.com/animint/animint2/blob/HEAD/R/coord-quickmap.R" class="external-link"><code>R/coord-quickmap.R</code></a></small>
      <div class="d-none name"><code>coord_map.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The representation of a portion of the earth, which is approximately spherical,
onto a flat 2D plane requires a projection. This is what
<code>coord_map</code> does. These projections account for the fact that the
actual length (in km) of one degree of longitude varies between the equator
and the pole. Near the equator, the ratio between the lengths of one degree
of latitude and one degree of longitude is approximately 1. Near the pole, it
is tends towards infinity because the length of one degree of longitude tends
towards 0. For regions that span only a few degrees and are not too close to
the poles, setting the aspect ratio of the plot to the appropriate lat/lon
ratio approximates the usual mercator projection. This is what
<code>coord_quickmap</code> does. With <code>coord_map</code> all elements of the
graphic have to be projected which is not the case here. So
<code>coord_quickmap</code> has the advantage of being much faster, in
particular for complex plots such as those using with
<code><a href="geom_tile.html">geom_tile</a></code>, at the expense of correctness in the projection.
This coordinate system provides the full range of map projections available
in the mapproj package.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">coord_map</span><span class="op">(</span></span>
<span>  projection <span class="op">=</span> <span class="st">"mercator"</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  orientation <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xlim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ylim <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">coord_quickmap</span><span class="op">(</span>xlim <span class="op">=</span> <span class="cn">NULL</span>, ylim <span class="op">=</span> <span class="cn">NULL</span>, expand <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-projection">projection<a class="anchor" aria-label="anchor" href="#arg-projection"></a></dt>
<dd><p>projection to use, see
<code>mapproject</code> for list</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>other arguments passed on to
<code>mapproject</code></p></dd>


<dt id="arg-orientation">orientation<a class="anchor" aria-label="anchor" href="#arg-orientation"></a></dt>
<dd><p>projection orientation, which defaults to
<code>c(90, 0, mean(range(x)))</code>.  This is not optimal for many
projections, so you will have to supply your own. See
<code>mapproject</code> for more information.</p></dd>


<dt id="arg-xlim">xlim<a class="anchor" aria-label="anchor" href="#arg-xlim"></a></dt>
<dd><p>manually specific x limits (in degrees of longitude)</p></dd>


<dt id="arg-ylim">ylim<a class="anchor" aria-label="anchor" href="#arg-ylim"></a></dt>
<dd><p>manually specific y limits (in degrees of latitude)</p></dd>


<dt id="arg-expand">expand<a class="anchor" aria-label="anchor" href="#arg-expand"></a></dt>
<dd><p>If <code>TRUE</code>, the default, adds a small expansion factor to
the limits to ensure that data and axes don't overlap. If <code>FALSE</code>,
limits are taken exactly from the data or <code>xlim</code>/<code>ylim</code>.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st">"maps"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">nz</span> <span class="op">&lt;-</span> <span class="fu"><a href="map_data.html">map_data</a></span><span class="op">(</span><span class="st">"nz"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Prepare a map of NZ</span></span></span>
<span class="r-in"><span><span class="va">nzmap</span> <span class="op">&lt;-</span> <span class="fu"><a href="ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">nz</span>, <span class="fu"><a href="aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">long</span>, y <span class="op">=</span> <span class="va">lat</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="geom_polygon.html">geom_polygon</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"white"</span>, colour <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot it in cartesian coordinates</span></span></span>
<span class="r-in"><span><span class="va">nzmap</span></span></span>
<span class="r-in"><span><span class="co"># With correct mercator projection</span></span></span>
<span class="r-in"><span><span class="va">nzmap</span> <span class="op">+</span> <span class="fu">coord_map</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># With the aspect ratio approximation</span></span></span>
<span class="r-in"><span><span class="va">nzmap</span> <span class="op">+</span> <span class="fu">coord_quickmap</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Other projections</span></span></span>
<span class="r-in"><span><span class="va">nzmap</span> <span class="op">+</span> <span class="fu">coord_map</span><span class="op">(</span><span class="st">"cylindrical"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">nzmap</span> <span class="op">+</span> <span class="fu">coord_map</span><span class="op">(</span><span class="st">"azequalarea"</span>, orientation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">36.92</span>,<span class="fl">174.6</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">states</span> <span class="op">&lt;-</span> <span class="fu"><a href="map_data.html">map_data</a></span><span class="op">(</span><span class="st">"state"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">usamap</span> <span class="op">&lt;-</span> <span class="fu"><a href="ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">states</span>, <span class="fu"><a href="aes.html">aes</a></span><span class="op">(</span><span class="va">long</span>, <span class="va">lat</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="geom_polygon.html">geom_polygon</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"white"</span>, colour <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use cartesian coordinates</span></span></span>
<span class="r-in"><span><span class="va">usamap</span></span></span>
<span class="r-in"><span><span class="co"># With mercator projection</span></span></span>
<span class="r-in"><span><span class="va">usamap</span> <span class="op">+</span> <span class="fu">coord_map</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">usamap</span> <span class="op">+</span> <span class="fu">coord_quickmap</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># See ?mapproject for coordinate systems and their parameters</span></span></span>
<span class="r-in"><span><span class="va">usamap</span> <span class="op">+</span> <span class="fu">coord_map</span><span class="op">(</span><span class="st">"gilbert"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">usamap</span> <span class="op">+</span> <span class="fu">coord_map</span><span class="op">(</span><span class="st">"lagrange"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For most projections, you'll need to set the orientation yourself</span></span></span>
<span class="r-in"><span><span class="co"># as the automatic selection done by mapproject is not available to</span></span></span>
<span class="r-in"><span><span class="co"># ggplot</span></span></span>
<span class="r-in"><span><span class="va">usamap</span> <span class="op">+</span> <span class="fu">coord_map</span><span class="op">(</span><span class="st">"orthographic"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">usamap</span> <span class="op">+</span> <span class="fu">coord_map</span><span class="op">(</span><span class="st">"stereographic"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">usamap</span> <span class="op">+</span> <span class="fu">coord_map</span><span class="op">(</span><span class="st">"conic"</span>, lat0 <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">usamap</span> <span class="op">+</span> <span class="fu">coord_map</span><span class="op">(</span><span class="st">"bonne"</span>, lat0 <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># World map, using geom_path instead of geom_polygon</span></span></span>
<span class="r-in"><span><span class="va">world</span> <span class="op">&lt;-</span> <span class="fu"><a href="map_data.html">map_data</a></span><span class="op">(</span><span class="st">"world"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">worldmap</span> <span class="op">&lt;-</span> <span class="fu"><a href="ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">world</span>, <span class="fu"><a href="aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">long</span>, y <span class="op">=</span> <span class="va">lat</span>, group <span class="op">=</span> <span class="va">group</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="geom_path.html">geom_path</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="op">(</span><span class="op">-</span><span class="fl">2</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span> <span class="op">*</span> <span class="fl">30</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="op">(</span><span class="op">-</span><span class="fl">4</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span> <span class="op">*</span> <span class="fl">45</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Orthographic projection with default orientation (looking down at North pole)</span></span></span>
<span class="r-in"><span><span class="va">worldmap</span> <span class="op">+</span> <span class="fu">coord_map</span><span class="op">(</span><span class="st">"ortho"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Looking up up at South Pole</span></span></span>
<span class="r-in"><span><span class="va">worldmap</span> <span class="op">+</span> <span class="fu">coord_map</span><span class="op">(</span><span class="st">"ortho"</span>, orientation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">90</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Centered on New York (currently has issues with closing polygons)</span></span></span>
<span class="r-in"><span><span class="va">worldmap</span> <span class="op">+</span> <span class="fu">coord_map</span><span class="op">(</span><span class="st">"ortho"</span>, orientation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">41</span>, <span class="op">-</span><span class="fl">74</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Loading required package: maps</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>there is no package called ‘maps’</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Toby Hocking, Hadley Wickham, Winston Chang, Nicholas Lewin-Koh, Martin Maechler, Randall Prium, Susan VanderPlas, Carson Sievert, Kevin Ferris, Jun Cai, Faizan Khan, Vivek Kumar, Himanshu Singh, Yufan Fei, Jocelyne Chen, Siddhesh Deodhar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

