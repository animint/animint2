<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Labeller functions are in charge of formatting the strip labels of
facet grids and wraps. Most of them accept a multi_line
argument to control whether multiple factors (defined in formulae
such as ~first + second) should be displayed on a single
line separated with commas, or each on their own line."><title>Labeller functions — labellers • animint2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Labeller functions — labellers"><meta property="og:description" content="Labeller functions are in charge of formatting the strip labels of
facet grids and wraps. Most of them accept a multi_line
argument to control whether multiple factors (defined in formulae
such as ~first + second) should be displayed on a single
line separated with commas, or each on their own line."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">animint2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2023.6.11</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tdhock/animint2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Labeller functions</h1>
      <small class="dont-index">Source: <a href="https://github.com/tdhock/animint2/blob/HEAD/R/facet-labels.r" class="external-link"><code>R/facet-labels.r</code></a></small>
      <div class="d-none name"><code>labellers.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Labeller functions are in charge of formatting the strip labels of
facet grids and wraps. Most of them accept a <code>multi_line</code>
argument to control whether multiple factors (defined in formulae
such as <code>~first + second</code>) should be displayed on a single
line separated with commas, or each on their own line.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">label_value</span><span class="op">(</span><span class="va">labels</span>, multi_line <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">label_both</span><span class="op">(</span><span class="va">labels</span>, multi_line <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">": "</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">label_context</span><span class="op">(</span><span class="va">labels</span>, multi_line <span class="op">=</span> <span class="cn">TRUE</span>, sep <span class="op">=</span> <span class="st">": "</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">label_parsed</span><span class="op">(</span><span class="va">labels</span>, multi_line <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">label_wrap_gen</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">25</span>, multi_line <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>labels</dt>
<dd><p>Data frame of labels. Usually contains only one
element, but facetting over multiple factors entails multiple
label variables.</p></dd>


<dt>multi_line</dt>
<dd><p>Whether to display the labels of multiple factors
on separate lines.</p></dd>


<dt>sep</dt>
<dd><p>String separating variables and values.</p></dd>


<dt>width</dt>
<dd><p>Maximum number of characters before wrapping the strip.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>label_value()</code> only displays the value of a factor while
<code>label_both()</code> displays both the variable name and the factor
value. <code>label_context()</code> is context-dependent and uses
<code>label_value()</code> for single factor facetting and
<code>label_both()</code> when multiple factors are
involved. <code>label_wrap_gen()</code> uses <code><a href="https://rdrr.io/r/base/strwrap.html" class="external-link">strwrap</a>()</code>
for line wrapping.</p>
<p><code>label_parsed()</code> interprets the labels as plotmath
expressions. <code><a href="label_bquote.html">label_bquote</a>()</code> offers a more flexible
way of constructing plotmath expressions. See examples and
<code><a href="https://rdrr.io/r/base/bquote.html" class="external-link">bquote</a>()</code> for details on the syntax of the
argument.</p>
    </div>
    <div class="section level2">
    <h2 id="writing-new-labeller-functions">Writing New Labeller Functions<a class="anchor" aria-label="anchor" href="#writing-new-labeller-functions"></a></h2>
    


<p>Note that an easy way to write a labeller function is to
  transform a function operating on character vectors with
  <code><a href="as_labeller.html">as_labeller</a>()</code>.</p>
<p>A labeller function accepts a data frame of labels (character
  vectors) containing one column for each factor. Multiple factors
  occur with formula of the type <code>~first + second</code>.</p>
<p>The return value must be a rectangular list where each 'row'
  characterises a single facet. The list elements can be either
  character vectors or lists of plotmath expressions. When multiple
  elements are returned, they get displayed on their own new lines
  (i.e., each facet gets a multi-line strip of labels).</p>
<p>To illustrate, let's say your labeller returns a list of two
  character vectors of length 3. This is a rectangular list because
  all elements have the same length. The first facet will get the
  first elements of each vector and display each of them on their
  own line. Then the second facet gets the second elements of each
  vector, and so on.</p>
<p>If it's useful to your labeller, you can retrieve the <code>type</code>
  attribute of the incoming data frame of labels. The value of this
  attribute reflects the kind of strips your labeller is dealing
  with: <code>"cols"</code> for columns and <code>"rows"</code> for rows. Note
  that <code><a href="facet_wrap.html">facet_wrap</a>()</code> has columns by default and rows
  when the strips are switched with the <code>switch</code> option. The
  <code>facet</code> attribute also provides metadata on the labels. It
  takes the values <code>"grid"</code> or <code>"wrap"</code>.</p>
<p>For compatibility with <code><a href="labeller.html">labeller</a>()</code>, each labeller
  function must have the <code>labeller</code> S3 class.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="labeller.html">labeller</a>()</code>, <code><a href="as_labeller.html">as_labeller</a>()</code>,
  <code><a href="label_bquote.html">label_bquote</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"alpha"</span>, <span class="st">"beta"</span>, <span class="st">"gamma"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="aes.html">aes</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Displaying only the values</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">cyl</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="labellers-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">cyl</span>, labeller <span class="op">=</span> <span class="va">label_value</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="labellers-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Displaying both the values and the variables</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">cyl</span>, labeller <span class="op">=</span> <span class="va">label_both</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="labellers-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Displaying only the values or both the values and variables</span></span></span>
<span class="r-in"><span><span class="co"># depending on whether multiple factors are facetted over</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">am</span> <span class="op">~</span> <span class="va">vs</span><span class="op">+</span><span class="va">cyl</span>, labeller <span class="op">=</span> <span class="va">label_context</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="labellers-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Interpreting the labels as plotmath expressions</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">cyl2</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="labellers-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">.</span> <span class="op">~</span> <span class="va">cyl2</span>, labeller <span class="op">=</span> <span class="va">label_parsed</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="labellers-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">vs</span> <span class="op">+</span> <span class="va">cyl2</span>, labeller <span class="op">=</span> <span class="va">label_parsed</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="labellers-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Toby Hocking, Hadley Wickham, Winston Chang, Nicholas Lewin-Koh, Martin Maechler, Randall Prium, Susan VanderPlas, Carson Sievert, Kevin Ferris, Jun Cai, Faizan Khan, Vivek Kumar, Himanshu Singh, Yufan Fei.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

